import{S as Z,i as ee,s as te,G as B,C as Y,D as F,e as p,a as b,c as y,b as r,d as x,f as a,m as k,E as K,t as w,g as S,h as L,j as T,A as H,o as V,aa as ne,Y as se}from"./index-495caaa8.js";import{A as le}from"./ArrowRight-d9884054.js";import{H as oe}from"./House-7a0e4539.js";import{T as Q}from"./Textfield-8acae1e3.js";function ie(o){let e,n,l;return e=new oe({props:{size:"24"}}),{c(){y(e.$$.fragment),n=H("Home")},m(t,i){k(e,t,i),x(t,n,i),l=!0},p:V,i(t){l||(w(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){T(e,t),t&&L(n)}}}function ae(o){let e;return{c(){e=H("Username/Email")},m(n,l){x(n,e,l)},d(n){n&&L(e)}}}function re(o){let e;return{c(){e=H("Password")},m(n,l){x(n,e,l)},d(n){n&&L(e)}}}function fe(o){let e,n,l;return e=new le({props:{size:"24",weight:"bold"}}),{c(){y(e.$$.fragment),n=H("Login")},m(t,i){k(e,t,i),x(t,n,i),l=!0},p:V,i(t){l||(w(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){T(e,t),t&&L(n)}}}function ue(o){let e,n,l,t,i,d,j,u,f,h,m,v,$,I,D,E,g,O,G,R,J,A,_,C;d=new B({props:{type:"primary",to:"/",icon:"iconLeft",$$slots:{default:[ie]},$$scope:{ctx:o}}});function W(s){o[4](s)}let M={type:"text",$$slots:{default:[ae]},$$scope:{ctx:o}};o[0]!==void 0&&(M.elem=o[0]),$=new Q({props:M}),Y.push(()=>F($,"elem",W));function X(s){o[5](s)}let N={type:"password",$$slots:{default:[re]},$$scope:{ctx:o}};return o[1]!==void 0&&(N.elem=o[1]),g=new Q({props:N}),Y.push(()=>F(g,"elem",X)),_=new B({props:{icon:"iconRight",$$slots:{default:[fe]},$$scope:{ctx:o}}}),_.$on("click",o[2]),{c(){e=p("div"),n=p("div"),n.innerHTML='<img src="../img/grapes.jpg" alt="Grapes" loading="lazy" class="svelte-7liy8k"/>',l=b(),t=p("div"),i=p("div"),y(d.$$.fragment),j=b(),u=p("div"),f=p("h1"),f.textContent="Log In",h=b(),m=p("form"),v=p("div"),y($.$$.fragment),D=b(),E=p("div"),y(g.$$.fragment),G=b(),R=p("p"),R.innerHTML='Don&#39;t have an account? <a href="/#/signup" class="svelte-7liy8k">Sign Up!</a>',J=b(),A=p("div"),y(_.$$.fragment),r(n,"class","splash svelte-7liy8k"),r(i,"id","home-button"),r(i,"class","svelte-7liy8k"),r(f,"class","svelte-7liy8k"),r(v,"class","textfield-container"),r(E,"class","textfield-container"),r(m,"method","post"),r(m,"action","../server/models/users.js"),r(m,"class","svelte-7liy8k"),r(R,"class","svelte-7liy8k"),r(A,"class","login-button svelte-7liy8k"),r(u,"class","login-container svelte-7liy8k"),r(t,"class","prompt svelte-7liy8k"),r(e,"class","page-container svelte-7liy8k")},m(s,c){x(s,e,c),a(e,n),a(e,l),a(e,t),a(t,i),k(d,i,null),a(t,j),a(t,u),a(u,f),a(u,h),a(u,m),a(m,v),k($,v,null),a(m,D),a(m,E),k(g,E,null),a(u,G),a(u,R),a(u,J),a(u,A),k(_,A,null),C=!0},p(s,[c]){const U={};c&64&&(U.$$scope={dirty:c,ctx:s}),d.$set(U);const z={};c&64&&(z.$$scope={dirty:c,ctx:s}),!I&&c&1&&(I=!0,z.elem=s[0],K(()=>I=!1)),$.$set(z);const P={};c&64&&(P.$$scope={dirty:c,ctx:s}),!O&&c&2&&(O=!0,P.elem=s[1],K(()=>O=!1)),g.$set(P);const q={};c&64&&(q.$$scope={dirty:c,ctx:s}),_.$set(q)},i(s){C||(w(d.$$.fragment,s),w($.$$.fragment,s),w(g.$$.fragment,s),w(_.$$.fragment,s),C=!0)},o(s){S(d.$$.fragment,s),S($.$$.fragment,s),S(g.$$.fragment,s),S(_.$$.fragment,s),C=!1},d(s){s&&L(e),T(d),T($),T(g),T(_)}}}function ce(o,e,n){let{continueRoute:l}=e;console.log(l);let t,i;function d(){console.log(t.value,i.value),fetch("/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({usernameEmail:t.value,password:i.value})}).then(f=>{f.json().then(h=>{console.log(h),localStorage.setItem("logged","true"),localStorage.setItem("userid",h.userid),fetch("/login/id",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userid:h.userid})}).then(m=>{m.json().then(v=>{console.log(v),ne.set(v.username),se(l)})})})})}function j(f){t=f,n(0,t)}function u(f){i=f,n(1,i)}return o.$$set=f=>{"continueRoute"in f&&n(3,l=f.continueRoute)},[t,i,d,l,j,u]}class ge extends Z{constructor(e){super(),ee(this,e,ce,ue,te,{continueRoute:3})}}export{ge as default};
